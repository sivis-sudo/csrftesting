<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hacker Dashboard — Single-file SPA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* small extra styles for terminal look */
    .terminal { background: #020202; color: #33ff77; }
    .glow { text-shadow: 0 0 6px rgba(51,255,119,0.08); }
    /* scrollbar */
    .terminal::-webkit-scrollbar { height: 10px; }
    .terminal::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius: 6px; }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 h-full font-sans">
  <div class="flex h-screen">
    <!-- Sidebar -->
    <aside class="w-72 bg-gray-800 p-5 flex flex-col gap-6">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-green-500 rounded flex items-center justify-center font-mono font-bold text-gray-900">HD</div>
        <div>
          <div class="text-lg font-bold text-green-400">Hacker Dashboard</div>
          <div class="text-xs text-gray-400">Local / Static SPA</div>
        </div>
      </div>

      <nav class="flex-1">
        <a href="#dashboard" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Dashboard</a>
        <a href="#targets" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Targets</a>
        <a href="#tools" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Tools</a>
        <a href="#tracker" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Vulnerability Tracker</a>
        <a href="#settings" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Settings</a>
      </nav>

      <div class="space-y-2">
        <button id="exportBtn" class="w-full bg-green-600 hover:bg-green-500 py-2 rounded font-semibold">Export JSON</button>
        <button id="resetBtn" class="w-full bg-red-700 hover:bg-red-600 py-2 rounded font-semibold">Reset All</button>
      </div>

      <div class="text-xs text-gray-500">Built: Single-file SPA • Use GitHub Pages or open locally</div>
    </aside>

    <!-- Main -->
    <main class="flex-1 p-6 overflow-auto">
      <div id="app"></div>
    </main>
  </div>

  <script>
  // -------------------- Data layer (localStorage) --------------------
  const STORAGE_KEYS = {targets: 'hd_targets_v1', vulns: 'hd_vulns_v1', logs: 'hd_logs_v1'};

  function load(key, fallback) { try { return JSON.parse(localStorage.getItem(key) || 'null') || fallback; } catch(e){ return fallback; } }
  function save(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

  let targets = load(STORAGE_KEYS.targets, [
    {id: id(), name: 'example.com', note: 'Demo target', lastScan: null, ports: [], subdomains: ['www.example.com','api.example.com']}
  ]);
  let vulns = load(STORAGE_KEYS.vulns, []);
  let logs = load(STORAGE_KEYS.logs, []);

  function persistAll(){ save(STORAGE_KEYS.targets, targets); save(STORAGE_KEYS.vulns, vulns); save(STORAGE_KEYS.logs, logs); }

  // -------------------- Utilities --------------------
  function id(){ return Math.random().toString(36).slice(2,9); }
  function now(){ return new Date().toLocaleString(); }
  function addLog(line){ logs.push({t: Date.now(), text: line}); if(logs.length>1000) logs.shift(); persistAll(); renderTerminal(); }

  // -------------------- Rendering --------------------
  const app = document.getElementById('app');

  function clearActiveNav(){ document.querySelectorAll('.nav-link').forEach(a=>a.classList.remove('bg-gray-700','text-green-300')) }
  function setActiveNav(hash){ clearActiveNav(); const el = document.querySelector(`a[href="#${hash}"]`); if(el){ el.classList.add('bg-gray-700','text-green-300'); }}

  function render(){
    const hash = location.hash.replace('#','') || 'dashboard';
    setActiveNav(hash);
    if(hash === 'dashboard') renderDashboard();
    else if(hash === 'targets') renderTargets();
    else if(hash === 'tools') renderTools();
    else if(hash === 'tracker') renderTracker();
    else if(hash === 'settings') renderSettings();
    else renderDashboard();
  }

  // Dashboard
  function renderDashboard(){
    const totalTargets = targets.length;
    const openPortsCount = targets.reduce((s,t)=>s+ (t.ports? t.ports.length:0),0);
    const highBugs = vulns.filter(v=>v.severity==='high').length;
    const lastScan = targets.map(t=>t.lastScan).filter(Boolean).sort().reverse()[0] || 'Never';

    app.innerHTML = `
      <div class="flex justify-between items-start mb-6">
        <h1 class="text-2xl font-bold glow text-green-300">Dashboard</h1>
        <div class="text-sm text-gray-400">${now()}</div>
      </div>

      <div class="grid grid-cols-4 gap-4 mb-6">
        <div class="bg-gray-800 p-4 rounded shadow">
          <div class="text-sm text-gray-400">Total Targets</div>
          <div class="text-2xl font-bold">${totalTargets}</div>
        </div>
        <div class="bg-gray-800 p-4 rounded shadow">
          <div class="text-sm text-gray-400">Open Ports</div>
          <div class="text-2xl font-bold">${openPortsCount}</div>
        </div>
        <div class="bg-gray-800 p-4 rounded shadow">
          <div class="text-sm text-gray-400">High Severity Bugs</div>
          <div class="text-2xl font-bold text-red-400">${highBugs}</div>
        </div>
        <div class="bg-gray-800 p-4 rounded shadow">
          <div class="text-sm text-gray-400">Last Scan</div>
          <div class="text-2xl font-bold">${lastScan}</div>
        </div>
      </div>

      <div class="grid grid-cols-3 gap-4">
        <div class="col-span-2 bg-gray-800 p-4 rounded shadow">
          <h2 class="font-semibold mb-3">Recent Targets</h2>
          <table class="w-full text-left text-sm">
            <thead><tr class="border-b border-gray-700"><th class="py-2">Target</th><th>Open Ports</th><th>Bugs</th><th>Actions</th></tr></thead>
            <tbody>
              ${targets.map(t=>`<tr class="border-b border-gray-700"><td class="py-2">${t.name} <div class="text-xs text-gray-400">${t.note||''}</div></td><td>${t.ports? t.ports.length:0}</td><td>${vulns.filter(v=>v.targetId===t.id).length}</td><td><button data-id="${t.id}" class="scan-btn bg-green-600 px-2 py-1 rounded text-sm">Run Scan</button> <button data-id="${t.id}" class="open-btn bg-gray-700 px-2 py-1 rounded text-sm">Open</button></td></tr>`).join('')}
            </tbody>
          </table>
        </div>

        <div class="bg-gray-800 p-4 rounded shadow">
          <h2 class="font-semibold mb-3">Quick Actions</h2>
          <div class="flex flex-col gap-2">
            <button id="quickScanAll" class="bg-green-600 py-2 rounded">Scan All Targets</button>
            <button id="quickAddTarget" class="bg-gray-700 py-2 rounded">Add Demo Target</button>
            <button id="viewLogsBtn" class="bg-gray-700 py-2 rounded">View Terminal Logs</button>
          </div>
        </div>
      </div>

      <div id="terminal" class="terminal mt-6 p-4 rounded h-40 overflow-auto text-sm"></div>
    `;

    // attach handlers
    document.querySelectorAll('.scan-btn').forEach(b=>b.addEventListener('click', ()=>startScan(b.dataset.id)));
    document.querySelectorAll('.open-btn').forEach(b=>{ b.addEventListener('click', ()=>{ location.hash = '#targets'; setTimeout(()=> openTarget(b.dataset.id),200); }); });
    document.getElementById('quickScanAll').addEventListener('click', ()=> targets.forEach(t=> startScan(t.id)));
    document.getElementById('quickAddTarget').addEventListener('click', ()=>{ targets.push({id:id(), name:'new-'+Date.now().toString().slice(-4)+'.local', note:'added from quick action', lastScan:null, ports:[], subdomains:[]}); persistAll(); render(); });
    document.getElementById('viewLogsBtn').addEventListener('click', ()=>{ location.hash = '#tools'; setTimeout(()=> renderTerminalView(),200); });

    renderTerminal();
  }

  // Targets page
  function renderTargets(){
    app.innerHTML = `
      <div class="flex justify-between items-start mb-6">
        <h1 class="text-2xl font-bold glow text-green-300">Targets</h1>
        <div>
          <button id="addTargetBtn" class="bg-green-600 px-3 py-2 rounded">Add Target</button>
        </div>
      </div>

      <div class="bg-gray-800 p-4 rounded shadow mb-4">
        <form id="addForm" class="flex gap-2">
          <input id="targetName" placeholder="example.com" class="flex-1 p-2 bg-gray-900 rounded" />
          <input id="targetNote" placeholder="note" class="w-56 p-2 bg-gray-900 rounded" />
          <button class="bg-green-600 px-3 py-2 rounded">Add</button>
        </form>
      </div>

      <div class="bg-gray-800 p-4 rounded shadow">
        <table class="w-full text-left text-sm">
          <thead><tr class="border-b border-gray-700"><th class="py-2">Target</th><th>Note</th><th>Last Scan</th><th>Open Ports</th><th>Actions</th></tr></thead>
          <tbody>
            ${targets.map(t=>`<tr class="border-b border-gray-700"><td class="py-2">${t.name}</td><td>${t.note||''}</td><td>${t.lastScan||'Never'}</td><td>${t.ports? t.ports.length:0}</td><td><button data-id="${t.id}" class="scan-btn bg-green-600 px-2 py-1 rounded">Scan</button> <button data-id="${t.id}" class="edit-btn bg-gray-700 px-2 py-1 rounded">Edit</button> <button data-id="${t.id}" class="del-btn bg-red-600 px-2 py-1 rounded">Delete</button></td></tr>`).join('')}
          </tbody>
        </table>
      </div>

      <div id="targetEditorModal" class="hidden fixed inset-0 bg-black/60 items-center justify-center">
        <div class="bg-gray-800 p-4 rounded w-96">
          <h3 class="font-semibold mb-2">Edit Target</h3>
          <input id="editName" class="w-full p-2 bg-gray-900 rounded mb-2" />
          <input id="editNote" class="w-full p-2 bg-gray-900 rounded mb-2" />
          <div class="flex gap-2 justify-end"><button id="saveEdit" class="bg-green-600 px-3 py-2 rounded">Save</button><button id="cancelEdit" class="px-3 py-2 rounded bg-gray-700">Cancel</button></div>
        </div>
      </div>
    `;

    // handlers
    document.getElementById('addForm').addEventListener('submit', (e)=>{
      e.preventDefault(); const name = document.getElementById('targetName').value.trim(); const note = document.getElementById('targetNote').value.trim(); if(!name) return alert('Enter domain'); targets.push({id:id(), name, note, lastScan:null, ports:[], subdomains:[]}); persistAll(); render(); });

    document.querySelectorAll('.scan-btn').forEach(b=>b.addEventListener('click', ()=> startScan(b.dataset.id)));
    document.querySelectorAll('.del-btn').forEach(b=>b.addEventListener('click', ()=>{ if(confirm('Delete target?')){ targets = targets.filter(t=>t.id!==b.dataset.id); persistAll(); render(); } }));
    document.querySelectorAll('.edit-btn').forEach(b=>b.addEventListener('click', ()=> openEdit(b.dataset.id)));

    // modal logic
    function openEdit(tid){ const modal = document.getElementById('targetEditorModal'); modal.classList.remove('hidden'); const t = targets.find(x=>x.id===tid); document.getElementById('editName').value = t.name; document.getElementById('editNote').value = t.note || '';
      document.getElementById('saveEdit').onclick = ()=>{ t.name = document.getElementById('editName').value.trim(); t.note = document.getElementById('editNote').value.trim(); persistAll(); modal.classList.add('hidden'); render(); };
      document.getElementById('cancelEdit').onclick = ()=>{ modal.classList.add('hidden'); };
    }
  }

  // Tools page
  function renderTools(){
    app.innerHTML = `
      <div class="flex justify-between items-start mb-6">
        <h1 class="text-2xl font-bold glow text-green-300">Tools & Terminal</h1>
        <div class="text-sm text-gray-400">Simulated runs — no network activity</div>
      </div>

      <div class="grid grid-cols-3 gap-4">
        <div class="col-span-2 bg-gray-800 p-4 rounded shadow">
          <h2 class="font-semibold mb-3">Terminal</h2>
          <div id="terminalView" class="terminal p-3 rounded h-64 overflow-auto text-sm"></div>
          <div class="mt-3 flex gap-2">
            <select id="termTarget" class="p-2 bg-gray-900 rounded">
              ${targets.map(t=>`<option value="${t.id}">${t.name}</option>`).join('')}
            </select>
            <button id="termNmap" class="bg-green-600 px-3 py-2 rounded">Run Nmap (sim)</button>
            <button id="termDir" class="bg-green-600 px-3 py-2 rounded">Run Dirb (sim)</button>
            <button id="termNuclei" class="bg-green-600 px-3 py-2 rounded">Run Nuclei (sim)</button>
          </div>
        </div>

        <div class="bg-gray-800 p-4 rounded shadow">
          <h2 class="font-semibold mb-3">Tool Shortcuts</h2>
          <div class="flex flex-col gap-2">
            <button id="scanSelected" class="bg-green-600 py-2 rounded">Scan Selected Target</button>
            <button id="createVulnDemo" class="bg-gray-700 py-2 rounded">Create Demo Vulnerability</button>
          </div>
        </div>
      </div>
    `;

    renderTerminal(); document.getElementById('termNmap').addEventListener('click', ()=>{ const t = document.getElementById('termTarget').value; simulatedNmap(t); });
    document.getElementById('termDir').addEventListener('click', ()=>{ const t = document.getElementById('termTarget').value; simulatedDir(t); });
    document.getElementById('termNuclei').addEventListener('click', ()=>{ const t = document.getElementById('termTarget').value; simulatedNuclei(t); });
    document.getElementById('scanSelected').addEventListener('click', ()=>{ const t = document.getElementById('termTarget').value; startScan(t); });
    document.getElementById('createVulnDemo').addEventListener('click', ()=>{ const tid = document.getElementById('termTarget').value; const v = {id:id(), targetId:tid, title:'Reflected XSS', severity:'medium', status:'open', notes:'Demo created '+now(), created: Date.now()}; vulns.push(v); persistAll(); addLog('Created demo vuln: '+v.title+' on '+getTargetName(tid)); render(); });
  }

  // Tracker page
  function renderTracker(){
    app.innerHTML = `
      <div class="flex justify-between items-start mb-6">
        <h1 class="text-2xl font-bold glow text-green-300">Vulnerability Tracker</h1>
        <div class="text-sm text-gray-400">Manage findings</div>
      </div>

      <div class="bg-gray-800 p-4 rounded shadow">
        <table class="w-full text-left text-sm">
          <thead><tr class="border-b border-gray-700"><th>Target</th><th>Title</th><th>Severity</th><th>Status</th><th>Actions</th></tr></thead>
          <tbody>
            ${vulns.map(v=>`<tr class="border-b border-gray-700"><td>${getTargetName(v.targetId)}</td><td>${v.title}</td><td>${v.severity}</td><td>${v.status}</td><td><button data-id="${v.id}" class="edit-v bg-green-600 px-2 py-1 rounded">Edit</button> <button data-id="${v.id}" class="del-v bg-red-600 px-2 py-1 rounded">Delete</button></td></tr>`).join('')}
          </tbody>
        </table>
      </div>

      <div id="vulnEditor" class="hidden fixed inset-0 bg-black/60 items-center justify-center">
        <div class="bg-gray-800 p-4 rounded w-96">
          <h3 class="font-semibold mb-2">Edit Vulnerability</h3>
          <input id="vTitle" class="w-full p-2 bg-gray-900 rounded mb-2" />
          <select id="vSeverity" class="w-full p-2 bg-gray-900 rounded mb-2"><option>low</option><option>medium</option><option>high</option></select>
          <select id="vStatus" class="w-full p-2 bg-gray-900 rounded mb-2"><option>open</option><option>verified</option><option>reported</option></select>
          <div class="flex gap-2 justify-end"><button id="saveV" class="bg-green-600 px-3 py-2 rounded">Save</button><button id="cancelV" class="px-3 py-2 rounded bg-gray-700">Cancel</button></div>
        </div>
      </div>
    `;

    document.querySelectorAll('.edit-v').forEach(b=>b.addEventListener('click', ()=> openVEditor(b.dataset.id)));
    document.querySelectorAll('.del-v').forEach(b=>b.addEventListener('click', ()=>{ if(confirm('Delete vuln?')){ vulns = vulns.filter(x=>x.id!==b.dataset.id); persistAll(); render(); } }));

    function openVEditor(vid){ const m = document.getElementById('vulnEditor'); m.classList.remove('hidden'); const v = vulns.find(x=>x.id===vid); document.getElementById('vTitle').value = v.title; document.getElementById('vSeverity').value = v.severity; document.getElementById('vStatus').value = v.status; document.getElementById('saveV').onclick = ()=>{ v.title = document.getElementById('vTitle').value; v.severity = document.getElementById('vSeverity').value; v.status = document.getElementById('vStatus').value; persistAll(); m.classList.add('hidden'); render(); }; document.getElementById('cancelV').onclick = ()=> m.classList.add('hidden'); }
  }

  // Settings
  function renderSettings(){
    app.innerHTML = `
      <div class="flex justify-between items-start mb-6">
        <h1 class="text-2xl font-bold glow text-green-300">Settings</h1>
        <div class="text-sm text-gray-400">Local storage & deployment</div>
      </div>

      <div class="bg-gray-800 p-4 rounded shadow">
        <h3 class="font-semibold mb-2">Deploy / Hosting</h3>
        <ol class="text-sm list-decimal list-inside text-gray-400">
          <li>Create GitHub repo named <code>hacker-dashboard</code>.</li>
          <li>Upload this <code>index.html</code> file to repository root.</li>
          <li>Enable GitHub Pages from <code>main</code> branch → root.</li>
          <li>Visit <code>https://your-username.github.io/hacker-dashboard/</code>.</li>
        </ol>
        <div class="mt-3 text-sm text-gray-300">This single-file app stores all data in your browser's LocalStorage. No network activity is performed.</div>
      </div>
    `;
  }

  // -------------------- Terminal/render helpers --------------------
  function renderTerminal(){ const el = document.getElementById('terminal') || document.getElementById('terminalView'); if(!el) return; el.innerHTML = logs.map(l=>`<div class="mb-1">[${new Date(l.t).toLocaleTimeString()}] ${escapeHtml(l.text)}</div>`).join(''); el.scrollTop = el.scrollHeight; }
  function renderTerminalView(){ location.hash = '#tools'; setTimeout(()=> renderTerminal(),200); }

  function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  function getTargetName(id){ const t = targets.find(x=>x.id===id); return t? t.name : 'unknown'; }

  // -------------------- Simulated scans --------------------
  function startScan(tid){ const t = targets.find(x=>x.id===tid); if(!t) return; addLog('Starting scan for '+t.name); t.lastScan = now(); persistAll();
    // Simulate discovering ports
    const simulatedPorts = [22,80,443,8080,3306,6379].sort(()=>0.5-Math.random()).slice(0, Math.floor(Math.random()*4)+1);
    addLog('Running nmap (simulated)...');
    let i=0; const iv = setInterval(()=>{ if(i<simulatedPorts.length){ addLog('Port '+simulatedPorts[i]+' open'); i++; } else { clearInterval(iv); t.ports = simulatedPorts; // chance to find vuln
        if(Math.random()>0.5){ const v = {id:id(), targetId: t.id, title: 'Simulated RCE', severity: 'high', status: 'open', notes: 'Found by simulated nmap+fingerprint', created: Date.now()}; vulns.push(v); addLog('High severity vuln discovered: '+v.title); }
        persistAll(); render(); } }, 500);
  }

  function simulatedNmap(tid){ addLog('Simulated: nmap -A '+getTargetName(tid)); startScan(tid); }
  function simulatedDir(tid){ addLog('Simulated: dirbuster against '+getTargetName(tid)); setTimeout(()=>{ const found = ['/admin','/login','/static/js/app.js']; addLog('Found: '+found.join(', ')); const t = targets.find(x=>x.id===tid); t.subdomains = (t.subdomains||[]).concat(found); persistAll(); render(); }, 1200); }
  function simulatedNuclei(tid){ addLog('Simulated: nuclei run on '+getTargetName(tid)); setTimeout(()=>{ if(Math.random()>0.6){ const v = {id:id(), targetId:tid, title:'Simulated Open Redirect', severity:'low', status:'open', notes:'Found by simulated nuclei', created: Date.now()}; vulns.push(v); addLog('Low severity vuln discovered: '+v.title); persistAll(); render(); } else addLog('No templates matched.'); }, 1100); }

  // -------------------- Helpers to open specific target --------------------
  function openTarget(tid){ // go to targets page and open editor for tid
    renderTargets(); setTimeout(()=>{ const editBtn = Array.from(document.querySelectorAll('.edit-btn')).find(b=>b.dataset.id===tid); if(editBtn) editBtn.click(); },300);
  }

  // -------------------- Export & reset --------------------
  document.getElementById('exportBtn').addEventListener('click', ()=>{
    const data = {targets, vulns, logs}; const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='hacker-dashboard-export-'+Date.now()+'.json'; a.click(); URL.revokeObjectURL(url);
  });

  document.getElementById('resetBtn').addEventListener('click', ()=>{ if(confirm('Clear all local data?')){ localStorage.removeItem(STORAGE_KEYS.targets); localStorage.removeItem(STORAGE_KEYS.vulns); localStorage.removeItem(STORAGE_KEYS.logs); targets = []; vulns = []; logs = []; persistAll(); render(); } });

  // -------------------- Init / routing --------------------
  window.addEventListener('hashchange', render);
  // initial render
  render();

  // expose a couple helpers on window for debugging
  window.HD = {targets, vulns, logs, persistAll};
  </script>
</body>
</html>
